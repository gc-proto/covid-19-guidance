<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Calculate your expenses - Claiming expenses for employment use of a work space in the home – Canada.ca</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name=”robots” content=”noindex, follow”>
    <!-- Meta data -->
    <!-- Meta data-->
    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_32/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_32/cdts/compiled/wet-en.js"></script>
    <link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
    <link href="../css/cews.css" rel="stylesheet">
    <link href="../css/conjunction.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <!-- Write closure template -->
    <script type="text/javascript">
        document.write(wet.builder.refTop({}));
    </script>
    <style>
        /* Styled div design */
        
        .fa-corner> :not(span) {
            padding-right: 15px;
        }
        
        div.fa-corner,
        div.fa-corner-inverse {
            position: relative;
            margin-bottom: 50px;
            margin-right: 15px;
        }
        
        div.fa-corner:before {
            content: "";
            position: absolute;
            right: 1.25em;
            z-index: -1;
            top: 0;
            height: 4px;
            width: 100px;
            background: #2572b4;
            margin-top: -6px;
        }
        
        div.fa-corner:after {
            content: "";
            position: absolute;
            right: 0;
            z-index: -1;
            top: 1.2em;
            width: 4px;
            height: 100px;
            background: #2572b4;
        }
        
        .fa-corner-icon {
            float: right;
            margin-top: -0.6em;
            margin-right: -0.5em;
            font-size: 2.5em;
            color: #2572b4;
            background-color: #fff;
            padding: 0px 0px 5px 5px;
        }
        /*inverse */
        
        div.fa-corner-inverse {
            padding-left: 1.7em;
            margin-left: 20px;
        }
        /*  div.fa-corner-inverse:after {
            content : "";
            position: absolute;
            left : 1.25em;
            z-index: -1;
            top : 0;
            height : 6px;
            width : 100px;
            background: #2572b4;
            margin-top:-6px;
            }
            */
        
        div.fa-corner-inverse:before {
            content: "";
            position: absolute;
            left: 0;
            z-index: -1;
            width: 1px;
            height: 100%;
            background: #2572b4;
        }
        
        .fa-corner-inverse .fa-corner-icon {
            float: left;
            margin-top: 0em;
            margin-left: -1.4em;
            font-size: 1.75em;
            color: #2572b4;
            background-color: #fff;
            padding: 2px 25px 2px 0px;
        }
        
        .fa-corner-icon.fa-stack {
            height: 1em;
            line-height: 1em;
            width: 1.25em;
        }
        
        .fa-corner-icon>.fa-stack-2x {
            font-size: 1em;
            left: 3px;
        }
        
        .fa-corner-icon.fa-corner-icon>.fa-stack-1x {
            font-size: 0.5em;
            left: 3px;
        }
        /*  div.fa-corner h2, div.fa-corner h3, div.fa-corner-inverse h2, div.fa-corner-inverse h3 {
            color: #2572b4;
            margin-top: auto;
            }
            */
        
        .fa-corner-inverse>.fa-stack {
            margin-left: -1.65em;
            margin-bottom: 2px;
        }
        /*Ordered list icons*/
        
        ol.lst-stps-alt:after,
        ol.lst-stps-alt:before {
            content: " ";
            display: table
        }
        
        ol.lst-stps-alt:after {
            clear: both
        }
        
        ol.lst-stps-alt {
            counter-reset: item;
            margin: 0;
            padding-left: 0;
            position: relative;
            list-style: none;
        }
        
        ol.lst-stps-alt>li {
            counter-increment: item;
            list-style: none inside;
            margin: 30px 0px;
            position: relative;
            padding-left: 55px;
            min-height: 30px;
        }
        
        ol.lst-stps-alt>li:before {
            content: counter(item);
            border-radius: 50%;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            border: 3px solid #2572b4;
            color: #2572b4;
            background-color: #fff;
            position: absolute;
            left: 0.05em;
            text-align: center;
            width: 2em;
            height: 2em;
        }
        
        main form :not(.btn-call-to-action).btn {
            line-height: 1.33333em !important;
        }
        
        .radio,
        .checkbox {
            margin-left: 10px;
        }
        
        .radio input[type=radio] {
            margin-left: -25px;
            transform: scale(2);
            margin-bottom: 10px;
        }
        
        .checkbox input[type=checkbox] {
            margin-left: -40px;
            transform: scale(2);
            margin-bottom: 10px;
            margin-top: 10px;
        }
        
        .checkbox {
            padding-left: 40px;
        }
    </style>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <div id="def-top"> </div>
    <!-- Write closure template -->
    <script type="text/javascript">
        var defTop = document.getElementById("def-top");
        defTop.outerHTML = wet.builder.top({
            lngLinks: [{
                lang: "fr",
                href: "#",
                text: "Français"
            }],
            breadcrumbs: [{
                title: "Canada.ca",
                href: "https://www.canada.ca/en.html"
            }, {
                title: "Taxes",
                href: "https://www.canada.ca/en/services/taxes.html"
            }, {
                title: "Income tax",
                href: "https://www.canada.ca/en/services/taxes/income-tax.html"
            }, {
                title: "Personal income tax",
                href: "https://www.canada.ca/en/services/taxes/income-tax/personal-income-tax.html"
            }, {
                title: "Completing a tax return",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return.html"
            }, {
                title: "Deductions, credits, and expenses",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return/deductions-credits-expenses.html"
            }, {
                title: "Line 22900 - Other employment expenses",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return/deductions-credits-expenses/line-229-other-employment-expenses.html"
            }, {
                title: "Work space in the home - Employee expenses",
                href: "index.html"
            }],
            search: true,
            siteMenu: true,
            showPreContent: true
        });
    </script>
    <main role="main" property="mainContentOfPage" class="container">
        <section class="gc-nav">
            <h1 property="name" id="wb-cont-nav">Work space in the home - Employee expenses</h1>
            <ul id="gc-navseq-nav" class="hidden-xs hidden-sm">
                <li> <a class="gc-navseq-nav-btn" href="#gc-navseq-header">Go to navigation menu</a> </li>
                <li> <a class="gc-navseq-nav-btn" href="#wb-cont">Skip to main content</a> </li>
            </ul>
            <nav aria-label="Section menu">
                <h2 id="gc-navseq-header" class="mrgn-tp-0 hidden-xs hidden-sm">Sections</h2>
                <ul class="gc-navseq">
                    <li><a href="who-apply.html">Who can claim</a></li>
                    <li><a href="how-much.html">How much of the work space can be claimed</a></li>
                    <li><a href="what-claim.html">What expenses can be claimed</a></li>

                    <li class="active"><a aria-current="page">Calculate your expenses</a></li>
                    <li><a href="how-apply.html">How to claim</a></li>
                </ul>
                <div class="hidden-sm hidden-xs" data-ajax-replace="index.html #related-menu"> </div>
            </nav>
        </section>
        <section class="gc-nav-section experimental">
            <h1 property="name" id="wb-cont">Calculate your expenses</h1>


            <details class="mrgn-bttm-lg">
                <summary>This calculator does not collect or store your information</summary>
                <p>The CRA is not collecting or retaining any of the information you enter on this page. These amounts are only used to help you determine the amount of work space expenses you may be eligible to claim.</p>
                <p><strong>Warning:</strong> This calculator does not save any data and if you leave or refresh this page you may need to enter the information again.</p>
            </details>

            <p><strong>Reminder:</strong> You must meet the <a href="who-apply.html#h-1">eligibility criteria</a> to claim your expenses.</p>
            <div class="wb-frmvld fieldflow-lg">
                <form>
                    <div class="wb-fieldflow " data-wb-fieldflow='{"renderas": "radio", "noForm": true, "isoptional": true, "reset": {"action": "addClass", "source": "#wsih-calculator", "class": "hidden"}}'>
                        <p>You would like to claim</p>
                        <ul>
                            <li data-wb-fieldflow='[{"action": "removeClass", "source": "#daily-rate-alert", "class": "hidden", "live": true}]'>A rate of $2 for each day you worked from home within the eligible period (up to $400 a year) because of the COVID-19 pandemic to cover all your work space and office supply expenses (Simple daily-rate claim)</li>
                            <li data-wb-fieldflow='[{"action": "removeClass", "source": ".ws-t777short", "class": "hidden", "live": true}, {"action": "addClass", "source": "#daily-rate-alert, .ws-t777reg", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-home-ownership", "renderas": "radio"}]'>Work space at home and office supply expenses due to the COVID-19 pandemic, and you have your receipts (Simplified expenses based claim)</li>
                            <li data-wb-fieldflow='[{"action": "removeClass", "source": ".ws-t777reg", "class": "hidden", "live": true}, {"action": "addClass", "source": "#daily-rate-alert, .ws-t777short", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-home-ownership", "renderas": "radio"}]'>Work space expenses and other employment expenses, such as vehicle costs, equipment, and fees, and you have your receipts (Standard expenses based claim)</li>
                        </ul>
                    </div>
                </form>
            </div>

            <div id="daily-rate-alert" class="hidden">
                <div class="alert alert-info">
                    <h2 class="mrgn-tp-0 h3">Simplified option</h2>
                    <p>To simplify the claim for your work space and office supply expenses, you can <a href="how-apply.html#h-1">claim a flat rate of $2 for every day you worked from home within the eligible period</a> (up to a maximum of $400). This option is for your 2020 tax return.</p>

                </div>
            </div>
            <div id="ff-home-ownership" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <div class="wb-fieldflow-header">
                    <div class="alert alert-info provisional ws-t777reg hidden">
                        <div class="row">
                            <div class="col-md-6 pull-right mrgn-bttm-md">
                                <a href="t777-e.png" target="_blank"> <img src="t777-e.png" alt="Screenshot of T777 with lines 17-23 highlighted" class="img-responsive img-thumbnail" /> </a>
                            </div>
                            <div class="mrgn-lft-md mrgn-rght-md">
                                <p><strong>Note:</strong> Given your various types of employment expenses, the calculator below can only help you determine the personal-use portion of your work space. The calculator will provide you with the values for lines
                                    17-23 of the T777. You will still need complete the remainder of the T777 to determine the final amount you can claim on your taxes.</p>
                            </div>
                        </div>
                    </div>
                    <p class="wb-fieldflow-label">Your work space is in a home that you</p>
                </div>
                <ul>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".home-rent", "class": "hidden", "live": true}, {"action": "addClass", "source": ".home-own, #wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>Rent</li>
                    <li data-wb-fieldflow='[{"action": "addClass", "source": ".home-rent, #wsih-calculator", "class": "hidden", "live": true}, {"action": "removeClass", "source": ".home-own", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-commission", "renderas": "radio"}]'>Own</li>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".home-rent, .home-own", "class": "hidden", "live": true}, {"action": "addClass", "source": "#wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-commission", "renderas": "radio"}]'>Rented then owned, or owned then rented</li>
                </ul>
            </div>
            <div id="ff-commission" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <p>Did you earn commission income (Box 42 on T4 slip)?</p>
                <ul>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".commission-income", "class": "hidden", "live": true}, {"action": "addClass", "source": ".salary-income, #wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>Yes </li>
                    <li data-wb-fieldflow='[{"action": "addClass", "source": ".commission-income, #wsih-calculator", "class": "hidden", "live": true}, {"action": "removeClass", "source": ".salary-income", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>No </li>
                </ul>
            </div>
            <!--<div id="ff-continuous" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
  <p>After working from home, did you return to primarily working at your place of work, only to resume working from home again? </p>
  <ul>
    <li data-wb-fieldflow='[{"action": "addClass", "source": ".ws-non-continuous, #wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>No; I have continuously worked from home</li>
    <li data-wb-fieldflow='[{"action": "addClass", "source": ".ws-non-continuous, #wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>No; I have returned to my place of work, and have not returned to working from home</li>
    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".ws-non-continuous", "class": "hidden", "live": true}, {"action": "addClass", "source": "#wsih-calculator", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-type", "renderas": "radio"}]'>Yes</li>
  </ul>
</div>//-->
            <div id="ff-ws-type" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <div class="wb-fieldflow-header">
                    <!--<div class="alert alert-info provisional ws-non-continuous hidden">
      <p><strong>Note:</strong> you can only claim expenses for the time you were were working from home.  If you returned to the work place and were required to work from home again, you cannot claim expenses for the time you were back at your work place.</p>
    </div>//-->
                    <p class="wb-fieldflow-label">What type of space do you work from at home? </p>
                    <p><a href="#ff-ws-type-lbx" class="wb-lbx">Difference between a designated work space (room) and a common (shared) 
      space&nbsp;<span class="far fa-question-circle"></span></a></p>
                </div>
                <ul>
                    <li data-wb-fieldflow='[{"action": "addClass", "source": "#wsih-calculator, .shared-room", "class": "hidden", "live": true}, {"action": "removeClass", "source": ".designated-room", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-measure", "renderas": "radio"}]'>
                        Designated work space (room)</li>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".shared-room", "class": "hidden", "live": true}, {"action": "addClass", "source": "#wsih-calculator, .designated-room", "class": "hidden", "live": true}, {"action": "append", "source": "#ff-ws-measure", "renderas": "radio"}]'>
                        Common (shared) space</li>
                </ul>
            </div>
            <div id="ff-ws-measure" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <p>Choose your preferred measurement units </p>
                <ul>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": "#wsih-calculator", "class": "hidden", "live": true}, {"action": "toggle", "toggle": ".ws-metre-sq", "live": true}]'> Square metres (m&#178;)</li>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": "#wsih-calculator", "class": "hidden", "live": true}, {"action": "toggle", "toggle": ".ws-feet-sq", "live": true}]'> Square feet (ft&#178;)</li>
                </ul>
            </div>
            <div class="hidden wb-frmvld" id="wsih-calculator">
                <form method="get" id="wsih-calculator-form">

                    <fieldset id="workarea">
                        <legend class="brdr-tp">Size of work space and home</legend>
                        <div class="form-group designated-room">
                            <label for="designated-room-area-input" class="required"><span class="field-name">Designated work (room) space in your home</span><span class="wb-inv"> in square <span
                              class="ws-metre-sq hidden">metres</span><span
                              class="ws-feet-sq hidden">feet</span></span> <strong class="required">(required)</strong> </label>
                            <div class="input-group col-sm-5 col-md-4">
                                <input class="form-control input-lg" id="designated-room-area-input" name="designated-room-area-input" type="number" required="required">
                                <span class="input-group-addon ws-metre-sq hidden">m&#178;</span><span class="input-group-addon ws-feet-sq hidden">ft&#178;</span> </div>
                        </div>
                        <div class="shared-room hidden">
                            <div class="form-group">
                                <label for="shared-room-area-input" class="required"><span class="field-name">Common (shared) space in your home</span><span class="wb-inv"> in square <span class="ws-metre-sq hidden">metres</span><span class="ws-feet-sq hidden">feet</span></span> <strong class="required">(required)</strong></label>
                                <p id="shared-room-def"><a href="#shared-room-lbx" class="wb-lbx">How to calculate a common (shared) space in your home&nbsp;<span class="far fa-question-circle"></span></a></p>
                                <div class="input-group col-sm-5 col-md-4">
                                    <input class="form-control input-lg" id="shared-room-area-input" name="shared-room-area-input" type="number" required="required" aria-describedby="shared-room-def">
                                    <span class="input-group-addon ws-metre-sq hidden">m&#178;</span><span class="input-group-addon ws-feet-sq hidden">ft&#178;</span> </div>
                            </div>
                        </div>
                        <div class="form-group mrgn-tp-md">
                            <label for="total-home-area-input" class="required"><span class="field-name">Total finished area of your home</span><span class="wb-inv"> in square <span
                              class="ws-metre-sq hidden">metres</span><span class="ws-feet-sq hidden">feet</span></span> <strong class="required">(required)</strong></label>
                            <p id="total-home-area-def"><a href="#total-home-area-lbx" class="wb-lbx">What is included in the total
              finished area&nbsp;<span class="far fa-question-circle"></span></a></p>
                            <div class="input-group col-sm-5 col-md-4">
                                <input class="form-control input-lg" id="total-home-area-input" name="total-home-area-input" type="number" aria-describedby="total-home-area-def" required="required">
                                <span class="input-group-addon ws-metre-sq hidden">m&#178;</span><span class="input-group-addon ws-feet-sq hidden">ft&#178;</span> </div>
                        </div>
                        <div class="shared-room hidden">
                            <div class="form-group">
                                <label for="shared-room-hrs-input" class="required"><span class="field-name">Hours a week you worked in the common space</span> <strong class="required">(required)</strong></label>
                                <div class="input-group col-sm-5 col-md-4">
                                    <input class="form-control input-lg" id="shared-room-hrs-input" name="shared-room-hrs-input" type="number" required="required">
                                    <span class="input-group-addon"><span class="far fa-clock fa-lg"></span></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <h3 class="mrgn-tp-0">Summary of calculated space</h3>
                            <ul class="fa-ul list-unstyled lst-spcd">
                                <li><span class="h4"><span class="room-area-output">0</span> <span class="ws-metre-sq hidden">square metres</span><span class="ws-feet-sq hidden">square feet</span></span> of <span class="designated-room hidden">designated </span><span class="shared-room hidden">common </span>work space </li>
                                <li class="brdr-bttm"><span class="fas fa-divide fa-li"><span class="wb-inv">divided by </span></span> <span class="h4"><span class="total-home-area-output">0</span> <span class="ws-metre-sq hidden">square metres</span><span class="ws-feet-sq hidden">square
                feet</span></span> of total finished area</li>
                                <li><span class="fas fa-equals fa-li"><span class="wb-inv">equals </span></span> <span class="h4"><span class="ws-area-employment-percent-output">0</span>%</span> of your home used for work space<br>
                                    <div class="ws-t777reg hidden mrgn-tp-md">The percentage of your home that isused for personal space<span class="designated-room"> and <span class="nowrap">non-employment</span> purposes</span> is <span class="h4"><span class="ws-area-personal-percent-output">0</span>%</span><span class="designated-room">, which will be used to calculate your personal-use portion</span>.</div>
                                </li>
                                <li class="shared-room hidden brdr-bttm"><span class="fas fa-times fa-li"><span class="wb-inv">multiplied by </span></span> <span class="h4"><span class="shared-room-hrs-percent-output" id="shared-room-hrs-percent-output-id">0</span>%</span> of hours of employment
                                    use in common space (<span class="shared-room-hrs-output">0</span> hours divided into 168 total hours a week) </li>
                                <li class="shared-room hidden"><span class="fas fa-equals fa-li"><span class="wb-inv">equals </span></span> <span class="h4"><span class="shared-room-employment-percent-output" id="shared-room-employment-percent-output-id">0</span>%</span> of your home
                                    used for work space and employment purposes</li>
                            </ul>
                            <div class="ws-t777reg hidden mrgn-tp-md mrgn-lft-xl">
                                <p class="shared-room hidden">The percentage of your home that is used for personal space and <span class="nowrap">non-employment</span> purposes is <span class="h4"><span class="shared-room-personal-percent-output" id="shared-room-personal-percent-output-id">0</span>%</span>,
                                    which will be used to calculate some of your personal-use portion of expenses claimed for your home and the work space.</p>
                                <p class="shared-room hidden">The percentage of your common (shared) work space used for personal-use is <span class="h4"><span class="shared-room-personal-hrs-percent-output" id="shared-room-personal-hrs-percent-output-id">0</span>%</span>, that will
                                    be used for expenses made on the work space only, based on the amount of hours worked in the space.</p>
                            </div>
                            <div class="ws-t777short hidden mrgn-tp-md mrgn-lft-xl">
                                <p class="designated-room mrgn-lft-sm">The percentage of your designated work space (room) used for employment-use is <span class="h4">100%</span>, that will be used on expenses claimed for the work space only.</p>
                                <p class="shared-room hidden mrgn-lft-sm">The percentage of your common (shared) work space used for employment-use is <span class="h4"><span class="shared-room-hrs-percent-output">0</span>%</span>, that will be used for expenses made on the work space only (e.g.
                                    maintenance), based on the amount of hours worked in the space.</p>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset id="workspace-calculation">
                        <legend class="mrgn-bttm-sm required">Period of time worked at home within the year <strong class="required">(required)</strong></legend>
                        <p id="periods-def"><a href="#periods-lbx" class="wb-lbx">How to claim expenses if you have not worked from home for the full year&nbsp;<span class="far fa-question-circle"></span></a></p>
                        <div class="row form-group">
                            <div class="col-sm-5 form-group">
                                <label for="work-home-start-1" class="control-label required"><span class="field-name">Start of period<span id="startCount"> 1</span></span><span class="wb-inv"> (required)</span></label>
                                <input class="form-control" id="work-home-start-1" name="work-home-start-1" type="date" required="required" />
                            </div>
                            <div class="col-sm-7">
                                <div class="row">
                                    <div class="col-sm-8 mrgn-bttm-0 form-group">
                                        <label for="work-home-end-1" class="control-label required"><span class="field-name">End of period<span id="endCount"> 1</span></span><span class="wb-inv"> (required)</span></label>
                                    </div>
                                    <div class="col-sm-8 form-group">
                                        <input class="form-control" id="work-home-end-1" name="work-home-end-1" type="date" required="required" max="" />
                                    </div>
                                    <div class="col-sm-4">
                                        <button class="btn btn-default btn-lg mrgn-rght-sm" title="Add period" type="button" id="add-date-2" data-wb-doaction='[{ "action": "removeClass", "source": ".date-span-2", "class": "hidden"}, { "action": "addClass", "source": "#add-date-2", "class": "hidden"}]'><span class="fas fa-plus"></span><span class="wb-inv"> Add period</span></button>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group date-span-2 hidden">
                            <div class="col-sm-5 form-group">
                                <label for="work-home-start-2" class="control-label required"><span class="field-name">Start of period 2</span><span class="wb-inv"> (required)</span></label>
                                <input class="form-control" id="work-home-start-2" name="work-home-start-2" type="date" required="required" />
                            </div>
                            <div class="col-sm-7">
                                <div class="row">
                                    <div class="col-sm-8 mrgn-bttm-0 form-group">
                                        <label for="work-home-end-2" class="control-label required"><span class="field-name">End of period 2</span><span class="wb-inv"> (required)</span></label>
                                    </div>
                                    <div class="col-sm-8 form-group">
                                        <input class="form-control" id="work-home-end-2" name="work-home-end-2" type="date" required="required" max="" />
                                    </div>
                                    <div class="col-sm-4">
                                        <button class="btn btn-default btn-lg mrgn-rght-sm" title="Add period" type="button" id="add-date-3" data-wb-doaction='[{ "action": "removeClass", "source": ".date-span-3", "class": "hidden"}, { "action": "addClass", "source": "#add-date-3, #remove-date-2", "class": "hidden"}]'><span class="fas fa-plus"></span><span class="wb-inv"> Add period</span></button>
                                        <button class="btn btn-warning btn-lg" title="Remove period" type="button" id="remove-date-2" data-wb-doaction='[{ "action": "removeClass", "source": "#add-date-2", "class": "hidden"}, { "action": "addClass", "source": ".date-span-2", "class": "hidden"}]'><span class="fas fa-trash-alt"></span><span class="wb-inv"> Remove period</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group date-span-3 hidden">
                            <div class="col-sm-5 form-group">
                                <label for="work-home-start-3" class="control-label required"><span class="field-name">Start of period 3</span><span class="wb-inv"> (required)</span></label>
                                <input class="form-control" id="work-home-start-3" name="work-home-start-3" type="date" required="required" />
                            </div>
                            <div class="col-sm-7">
                                <div class="row">
                                    <div class="col-sm-8 mrgn-bttm-0 form-group">
                                        <label for="work-home-end-3" class="control-label required"><span class="field-name">End of period 3</span><span class="wb-inv"> (required)</span></label>
                                    </div>
                                    <div class="col-sm-8 form-group">
                                        <input class="form-control" id="work-home-end-3" name="work-home-end-3" type="date" required="required" max="" />
                                    </div>
                                    <div class="col-sm-4">
                                        <button class="btn btn-default btn-lg mrgn-rght-sm" title="Add period" type="button" id="add-date-4" data-wb-doaction='[{ "action": "removeClass", "source": ".date-span-4", "class": "hidden"}, { "action": "addClass", "source": "#add-date-4, #remove-date-3", "class": "hidden"}]'><span class="fas fa-plus"></span><span class="wb-inv"> Add period</span></button>
                                        <button class="btn btn-warning btn-lg" title="Remove period" type="button" id="remove-date-3" data-wb-doaction='[{ "action": "removeClass", "source": "#add-date-3, #remove-date-2", "class": "hidden"}, { "action": "addClass", "source": ".date-span-3", "class": "hidden"}]'><span class="fas fa-trash-alt"></span><span class="wb-inv"> Remove period</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row form-group date-span-4 hidden">
                            <div class="col-sm-5 form-group">
                                <label for="work-home-start-4" class="control-label required"><span class="field-name">Start of period 4</span><span class="wb-inv"> (required)</span></label>
                                <input class="form-control" id="work-home-start-4" name="work-home-start-4" type="date" required="required" />
                            </div>
                            <div class="col-sm-7">
                                <div class="row">
                                    <div class="col-sm-8 mrgn-bttm-0 form-group">
                                        <label for="work-home-end-4" class="control-label required"><span class="field-name">End of period 4</span><span class="wb-inv"> (required)</span></label>
                                    </div>
                                    <div class="col-sm-8 form-group">
                                        <input class="form-control" id="work-home-end-4" name="work-home-end-4" type="date" required="required" max="" />
                                    </div>
                                    <div class="col-sm-4">

                                        <button class="btn btn-warning btn-lg" title="Remove period" type="button" id="remove-date-4" data-wb-doaction='[{ "action": "removeClass", "source": "#add-date-4, #remove-date-3", "class": "hidden"}, { "action": "addClass", "source": ".date-span-4", "class": "hidden"}]'><span class="fas fa-trash-alt"></span><span class="wb-inv"> Remove period</span></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset>
                        <legend class="mrgn-bttm-0">Home including work space expenses to claim</legend>
                        <p>Enter the amount paid to an expense for the period you worked from home. Enter $0 if you are not claiming the expense.</p>
                        <div class="form-group home-rent hidden">
                            <label for="home-rent-input" class="required"><span class="field-name">Rent from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>

                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="home-rent-input" name="home-rent-input" type="text" required="required">
                            </div>

                        </div>
                        <div class="form-group">
                            <label for="utilities-input" class="required"><span class="field-name">Electricity, heat, water and internet from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="utilities-input" name="utilities-input" type="text" required="required">
                            </div>

                        </div>
                        <div class="form-group">
                            <label for="home-maintenance-input" class="required"><span class="field-name">Maintenance on the home that included the work space from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span>
             <span class="wb-inv"> in dollars and cents</span></span> <strong class="required">(required)</strong></label>
                            <p id="home-maintenance-def"><a href="#home-maintenance-lbx" class="wb-lbx">What is considered reasonable maintenance expenses for the home and work space&nbsp;<span class="far fa-question-circle"></span></a></p>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="home-maintenance-input" name="home-maintenance-input" type="text" required="required">
                            </div>

                        </div>
                        
                        <div class="home-own">
                            <div class="form-group commission-income hidden">
                                <label for="insurance-commission-input" class="required"><span class="field-name">Home insurance from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span> <br></span><span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                                <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                    <input class="form-control input-lg currency" id="insurance-commission-input" name="insurance-commission-input" type="text" required="required">
                                </div>

                            </div>
                            <div class="form-group commission-income hidden">
                                <label for="property-taxes-commission-input" class="required"><span class="field-name">Property taxes from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span> <br></span><span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                                <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                    <input class="form-control input-lg currency" id="property-taxes-commission-input" name="property-taxes-commission-input" type="text" required="required">
                                </div>

                            </div>
                        </div>
                        <div class="form-group">
                            <label for="home-expenses-input" class="required"><span class="field-name">Other home expenses that included the work space from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>

                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="home-expenses-input" name="home-expenses-input" type="text" required="required">
                            </div>

                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="mrgn-bttm-0">Work space and employment use expenses to claim</legend>
                        <p>Enter the amount paid to an expense for the period you worked from home. Enter $0 if you are not claiming the expense.</p>
                       <div class="form-group designated-room">
                            <label for="designated-room-maintenance-input" class="required"><span class="field-name">Maintenance of the designated work space (room) only from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span>
               <span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                            <p id="ws-maintenance-def-1"><a href="#ws-maintenance-lbx" class="wb-lbx">What is considered reasonable maintenance expenses for the work space&nbsp;<span class="far fa-question-circle"></span></a></p>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="designated-room-maintenance-input" name="designated-room-maintenance-input" type="text" required="required">
                            </div>

                        </div>
                        <div class="form-group shared-room hidden">
                            <label for="shared-room-maintenance-input" class="required"><span class="field-name">Maintenance of the common (shared) works space only from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span></span>
              <span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                            <p id="ws-maintenance-def-2"><a href="#ws-maintenance-lbx" class="wb-lbx">What is considered reasonable maintenance expenses for the work space&nbsp;<span class="far fa-question-circle"></span></a></p>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="shared-room-maintenance-input" name="shared-room-maintenance-input" type="text" required="required">
                            </div>

                        </div>
                       
                       <div class="form-group ws-t777short hidden">
                            <label for="supplies-input" class="required"><span class="field-name">Supplies purchased from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span><br>
              <span class="text-muted">such as postage, stationary, ink cartridges, and other office supplies only for employment purposes</span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <p id="ws-supplies-def"><a href="#supplies-salary-lbx" class="wb-lbx">What supplies can be claimed&nbsp;<span class="far fa-question-circle"></span></a>
                            </p>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="supplies-input" name="supplies-input" type="text" required="required">
                            </div>

                        </div>
                        <div class="form-group ws-t777short hidden">
                            <label for="ws-expenses-input" class="required"><span class="field-name">Other expenses that support working from home from <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span> <br>
              <span class="text-muted">such as employment use of a cell phone, employment use of long distance calls, etc.</span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <p id="ws-expenses-def"><a href="#ws-expenses-lbx" class="wb-lbx">What are expenses you can claim for employment purposes&nbsp;<span class="far fa-question-circle"></span></a></p>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="ws-expenses-input" name="ws-expenses-input" type="text" required="required">
                            </div>

                        </div>




                    </fieldset>
                    <fieldset class="ws-t777short hidden">
                        <legend class="mrgn-bttm-0">Income and deductions</legend>
                        <p>Enter the amount reported on your T4 tax slip. Enter $0 if there is no amount on the slip.</p>
                        <div class="form-group">
                            <label for="income-input" class="required"><span class="field-name">Enter your employment income<br>
              <span class="text-muted">box 14 of your T4 slips (or line 10100 of your return)</span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="income-input" name="income-input" type="text" required="required">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="dues-input" class="required"><span class="field-name">Annual union, professional, or like dues<br>
              <span class="text-muted">box 44 of your T4 slips (or line 21200 of your return)</span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="dues-input" name="dues-input" type="text" required="required">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="pension-input" class="required"><span class="field-name">Registered pension plan (RPP) deduction<br>
              <span class="text-muted">box 20 of your T4 slips (or box 032 of your T4A slips, or line 20700 of your return)</span></span><span class="wb-inv"> in dollars and
              cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="pension-input" name="pension-input" type="text" required="required">
                            </div>
                        </div>
                    </fieldset>
                    <p>
                        <button class="btn btn-call-to-action btn-lg mrgn-bttm-lg mrgn-tp-lg" id="exp-cal" type="submit">Calculate your
          expenses</button>
                    </p>
                </form>
            </div>
            <div class="panel panel-primary hidden" id="results">
                <div class="panel-heading">
                    <h3 class="panel-title">Your employee home work space expenses results</h3>
                </div>
                <div class="panel-body">
                    <div id="wsih-print-summary-1">
                        <p><strong>Print and keep this record using the print preview button below</strong>. You will need the amounts below when filling out the <strong class="ws-t777reg hidden">T777</strong><strong class="ws-t777short hidden">T777 short</strong>                            form.</p>
                        <div class="ws-t777short hidden">
                            <h4 class="mrgn-tp-sm">Summary of total expenses</h4>
                            <p><span class="h4">$<span class="ws-t777short-total-amount">0.00</span></span> is the total expenses you can claim.</p>
                            <p>This amount will go on <strong>line 5 </strong> on the T777 short form, which will also go on line 22900 of your return. </p>
                            <div id="flat-rate-info" class="hidden">
                                <p><strong>Reminder:</strong> For the 2020 tax year, CRA is allowing to claim a flat rate of <strong>$2 a day</strong> for every day worked from home within the eligible period up to <strong>$400.00</strong> for all your expenses.</p>
                                <p>Your employer is not required to complete a <strong>T2200 short</strong> and you do not need to fill out the <strong>T777 short</strong> form.</p>
                               <p>You will simply enter:<br>
                              the <strong>number of days worked</strong> (full or part time, up to a maximum of 200 days)<br>
                                  <strong><abbr title="multiplied by" class="brdr-0">x</abbr> $2</strong><br>
                            on <strong>line 22900</strong> on your return.</p>
                               <p><a href="how-apply.html#h-1" target="_blank">Daily-rate claim<span class="wb-inv"> (opens in a new window)</span>&nbsp;<sup class="far fa-window-restore"></sup></a></p>
                            </div>
                            <h4>Summary of the employment-use amount</h4>
                            <p><span class="h4">$<span class="employment-use-total-amount">0.00</span></span> of the employment-use portion.</p>
                            <p>This amount will go on <strong>line 12</strong> of the T777 short form.</p>
                            <p>The total amount of the employment-use portion is based on:</p>
                            <ul>
                                <li><span class="h5">$<span class="employment-use-home-amount">0.00</span></span> expenses paid for the entire home including work space<br>
                                    <span class="mrgn-lft-lg">$<span class="employment-use-home-claim">0.00</span> &times; <span class="employment-use-home-rate">0</span>%</li>
                                <li><span class="h5">$<span class="employment-use-ws-amount">0.00</span></span> expenses paid for the work space only<br>
                                    <span class="mrgn-lft-lg">$<span class="employment-use-ws-claim">0.00</span> &times; <span class="employment-use-ws-rate">0</span>%</li>
                            </ul>
                        </div>
                        <div class="ws-t777reg hidden">
                            <h4 class="mrgn-tp-sm">Summary of the personal-use portion</h4>
                            <p><span class="h4">$<span class="personal-use-total-amount">0.00</span></span> of the personal-use portion.</p>
                            <p>This amount will go on <strong>line 23</strong> of the form T777.</p>
                            <p>The total amount of personal-use portion is based on:</p>
                            <ul>
                                <li><span class="h5">$<span class="personal-use-home-amount">0.00</span></span> expenses paid for the entire home including work space<br>
                                    <span class="mrgn-lft-lg">$<span class="personal-use-home-claim">0.00</span> &times; <span class="personal-use-home-rate">0</span>%</span>
                                </li>
                              <!--  <li><span class="h5">$<span class="personal-use-ws-amount">0.00</span></span> expenses paid for the work space only<br>
                                    <span class="mrgn-lft-lg">$<span class="personal-use-ws-claim">0.00</span> &times; <span class="personal-use-ws-rate">0</span>%</span>
                                </li>//-->
                            </ul>
                        </div>
                    </div>
                    <details>
                        <summary>Amounts you provided</summary>
                        <div id="wsih-form-tables">
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <caption>
                                        Expense and income amounts provided<br> From: <span class="startDate1 nowrap">[Start]</span> to <span class="endDate1 nowrap">[End]</span><span class="date-span-2 hidden">, and from <span class="startDate2 nowrap">[Start]</span> to
                                        <span class="endDate2 nowrap">[End]</span></span><span class="date-span-3 hidden">, and from <span class="startDate3 nowrap">[Start]</span> to <span class="endDate3 nowrap">[End]</span></span><span class="date-span-4 hidden">, and from <span class="startDate4 nowrap">[Start]</span> to <span class="endDate4 nowrap">[End]</span></span>                                       to <span class="endDate4">[End]</span></span>
                                    </caption>
                                    <thead>
                                        <tr>
                                            <th scope="col" class="col-sm-6">Expense</th>
                                            <th scope="col" class="active">Amount to report</th>
                                            <th scope="col">T777<span class="ws-t777short hidden"> short</span> form</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="ws-t777short hidden">
                                            <td>Supplies (postage, stationery, ink cartridge, other office supplies, etc.)</td>
                                            <td class="active"><span class="supplies-output">[$0.00]</span></td>
                                            <td>Line 1</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Other expenses (employment use of a cell phone, employment use of monthly internet access fees, long distance calls for employment purposes, etc.)</td>
                                            <td class="active"><span class="ws-expenses-output">[$0.00]</span></td>
                                            <td>Line 2</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Total expenses (you can claim)</td>
                                            <td class="active"><span class="ws-total-claim-output">[$0.00]</span></td>
                                            <td>Line 5</td>
                                        </tr>
                                        <tr>
                                            <td>Electricity, heat, water and internet </td>
                                            <td class="active"><span class="utilities-output">[$0.00]</span></td>
                                            <td>Line <span class="ws-t777short hidden">6</span><span class="ws-t777reg hidden">17</span></td>
                                        </tr>
                                        <tr>
                                            <td>Maintenance
                                                <ul>
                                                    <li>Maintenance of entire home (including work <span class="nowrap">space) = <span class="home-ws-maintenance">[$0.00]</span></span>
                                                    </li>
                                                    <li class="designated-room">Designated work space (room) <span class="nowrap">only = <span class="designated-room-maintenance-output">[$0.00]</span></span>
                                                    </li>
                                                    <li class="shared-room hidden">Common (shared) work space <span class="nowrap">only = <span class="shared-room-maintenance-output">[$0.00]</span></span>
                                                    </li>
                                                </ul>
                                            </td>
                                            <td class="active"><span class="maintenance-output">[$0.00]</span></td>
                                            <td>Line <span class="ws-t777short hidden">7</span><span class="ws-t777reg hidden">18</span></td>
                                        </tr>
                                        <tr class="commission-income">
                                            <td>Home insurance <small>(commission income only)<br/>
                  </small></td>
                                            <td class="active"><span class="insurance-commission-output">[$0.00]</span></td>
                                            <td>Line <span class="ws-t777short hidden">8</span><span class="ws-t777reg hidden">19</span></td>
                                        </tr>
                                        <tr class="commission-income">
                                            <td>Property taxes<br/>
                                                <small>(commission income only)<br/>
                  </small></td>
                                            <td class="active"><span class="property-taxes-commission-output">[$0.00]</span></td>
                                            <td>Line <span class="ws-t777short hidden">9</span><span class="ws-t777reg hidden">20</span></td>
                                        </tr>
                                        <tr>
                                            <td>Other expenses (rent, etc.)</td>
                                            <td class="active"><span class="home-expenses-output">[$0.00]</span></td>
                                            <td>Line <span class="ws-t777short hidden">10</span><span class="ws-t777reg hidden">21</span></td>
                                        </tr>
                                        <tr class="ws-t777reg hidden">
                                            <td>Personal-use portion</td>
                                            <td class="active"><span class="personal-use-output">[$0.00]</span></td>
                                            <td>Line 23</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Employment-use amount</td>
                                            <td class="active"><span class="employment-use-output">[$0.00]</span></td>
                                            <td>Line 12</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Employment income</td>
                                            <td class="active"><span class="income-output">[$0.00]</span></td>
                                            <td>Line 13</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Dues (line 20700) and RPP deductions (line 21200) </td>
                                            <td class="active"><span class="dues-pension-output">[$0.00]</span></td>
                                            <td>Line 14</td>
                                        </tr>
                                        <tr class="ws-t777short hidden">
                                            <td>Expenses availble to use in future years </td>
                                            <td class="active"><span class="carry-forward-output">[$0.00]</span></td>
                                            <td>Line 16</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="table-responsive">
                                <table class="table">
                                    <caption>
                                        Work space data you provided
                                    </caption>
                                    <tbody>
                                        <tr>
                                            <th scope="row">Size of work space in your home</th>
                                            <td class="text-right nowrap"><span class="room-area-output">[answer]</span><span class="hidden ws-metre-sq">m²</span><span class="hidden ws-feet-sq">ft²</span></td>
                                        </tr>
                                        <tr class="shared-room hidden">
                                            <th scope="row">Hours a week in work space</th>
                                            <td class="text-right nowrap"><span class="shared-room-hrs-output">[answer]</span></td>
                                        </tr>
                                        <tr>
                                            <th scope="row">Total finished area of your home</th>
                                            <td class="text-right nowrap"><span class="total-home-area-summary">[answer]</span><span class="hidden ws-metre-sq">m²</span><span class="hidden ws-feet-sq">ft²</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </details>
                    <div id="wsih-print-summary-2">
                        <div class="carry-fwd hidden">
                            <p>
                                The income you reported is less than the expenses claimed for employment-use. You can carry forward <strong class="carry-fwd-output">[$0.00]</strong>                                to be claimed in future years.</p>
                            <p>This amount will go on <strong>line 17</strong> of the T777 short form.</p>
                            <p class="commission-income hidden"><strong>Note:</strong> If you earned commission income, you may also claim <a href="#salaried-lbx" class="wb-lbx">expenses as a salaried employee</a> instead.</p>
                        </div>
                        <div class="hidden-print ws-t777reg">
                            <p><strong>Reminder:</strong> There are supplies you can, and cannot claim for employment expenses. Review <span class="salary-income"><a href="#supplies-salary-lbx" class="wb-lbx">which types of supplies can, and cannot be claimed as a salaried employee</a></span>                                <span class="commission-income hidden"><a href="#supplies-commission-lbx" class="wb-lbx">which types of supplies can, and cannot be claimed as an employee who makes commissions</a></span>.</p>
                        </div>
                    </div>
                    <p>You are now ready to <strong>print these amounts</strong> so you can enter them into the form. The data is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
                    <p class="hidden-print"><a class="wb-lbx btn btn-default btn-lg wb-init wb-lbx-inited" id="wb-auto-62" role="button" href="#pp-statement"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CEWS
      statement</span></span></a></p>
                </div>
            </div>


            <!--Overlays //-->
            <section id="ff-ws-type-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Designated work space (room) or common (shared) space</h2>
                </header>
                <div class="modal-body" data-ajax-replace="how-much.html #tp-ws>"> </div>
            </section>
            <section id="shared-room-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">How to calculate a common (shared) space in your home</h2>
                </header>
                <div class="modal-body">
                    <h3 class="mrgn-tp-0">Example of working from the dining room table</h3>
                    <div data-ajax-replace="how-much.html #ex-wrkspc"></div>
                    <h3>Open concept designs</h3>
                    <div data-ajax-replace="how-much.html #opn-cncpt"></div>
                </div>
            </section>
            <section id="total-home-area-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Total finished area of the home</h2>
                </header>
                <div class="modal-body" data-ajax-replace="how-much.html #sz-hm>"> </div>
            </section>
            <section id="periods-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">How to claim expenses if you have not worked from home for the full year</h2>
                </header>
                <div class="modal-body">
                  <ul class="list-unstyled data-ajax" data-ajax-replace="what-claim.html #ajax-portion"></ul>
                </div>
            </section>

            <section id="home-maintenance-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Reasonable maintenance expenses for a home and work area</h2>
                </header>
                <div class="modal-body">
                    <ul class="fa-ul">
                        <li data-ajax-replace="what-claim.html #expns-hm-ws-y>"></li>
                        <li data-ajax-replace="what-claim.html #expns-hm-ws-n>"></li>
                    </ul>
                </div>
            </section>
            <section id="ws-maintenance-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Reasonable maintenance expenses for a  work area</h2>
                </header>
                <div class="modal-body">
                    <ul class="fa-ul">
                        <li data-ajax-replace="what-claim.html #expns-ws-onl-y>"></li>
                        <li data-ajax-replace="what-claim.html #expns-hm-ws-n>"></li>
                    </ul>
                </div>
            </section>
            <section id="home-maintenance-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Reasonable maintenance expenses for a home and work area</h2>
                </header>
                <div class="modal-body">
                    <ul class="fa-ul" data-ajax-replace="what-claim.html #expns-hm-ws-y #expns-hm-ws-n">
                        <li data-ajax-replace="what-claim.html #expns-hm-ws-y>"></li>
                        <li data-ajax-replace="what-claim.html #expns-hm-ws-n>"></li>
                    </ul>
                </div>
            </section>
            <section id="ws-expenses-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Expenses that can be claimed for employment purposes</h2>
                </header>
                <div class="modal-body">
                    <div data-ajax-replace="what-claim.html #internet-cntnt" class="data-ajax"></div>
                    <div data-ajax-replace="what-claim.html #phone-cntnt" class="data-ajax"></div>
                </div>
            </section>
            <section id="supplies-salary-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Work space supplies and if they can be claimed</h2>
                </header>
                <div class="modal-body data-ajax" data-ajax-replace="what-claim.html #supplies-cntnt">

                </div>
            </section>
            <!-- <section id="supplies-commission-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                <header class="modal-header">
                    <h2 class="modal-title">Work space supplies and if they can be claimed for an employee </h2>
                </header>
                <div class="modal-body">
                    <table class="table wb-tables" data-wb-tables='{"lengthMenu": [[5, -1], [5, "All"]] }'>
                        <caption class="wb-inv">
                            Common home office supplies
                        </caption>
                        <thead>
                            <tr>
                                <th scope="col">Item</th>

                                <th scope="col">Can be claimed?</th>

                            </tr>
                        </thead>
                        <tbody data-ajax-replace="what-claim.html .type-supply">

                        </tbody>
                    </table>
                </div>
            </section>//-->
            <!--Overlay for print preview //-->
            <section id="pp-statement" class="mfp-hide modal-dialog modal-content overlay-def provisional">
                <header class="modal-header">
                    <h2 class="modal-title">Print preview for employment use of a work space in the home expense calculation</h2>
                </header>
                <div class="modal-body">
                    <div data-ajax-replace="#wsih-print-summary-1"></div>
                    <div data-ajax-replace="#wsih-form-tables" class="data-ajax"></div>
                    <div data-ajax-replace="#wsih-print-summary-2"></div>
                    <ul class="list-inline">
                        <li>
                            <button onclick="window.print()" class="btn btn-success btn-lg"><span
                class="glyphicon glyphicon-print"></span> Print this statement</button>
                        </li>
                        <li class="pull-right">
                            <button title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss" type="button">Close<span class="wb-inv"> overlay</span></button>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer hidden"> </div>
            </section>
            <nav role="navigation" class="mrgn-bttm-lg mrgn-tp-lg">
                <h3 class="wb-inv">Document navigation</h3>
                <ul class="pager">
                    <li class="next"><a href="how-apply.html" rel="next">How to claim</a></li>
                </ul>
            </nav>
            <div class="hidden-md hidden-lg" data-ajax-replace="index.html #related-menu"> </div>
        </section>

        <div id="def-preFooter"> </div>
        <!-- Write closure template -->
        <script type="text/javascript">
            var defPreFooter = document.getElementById("def-preFooter");
            defPreFooter.outerHTML = wet.builder.preFooter({
                dateModified: "2020-03-13",
                showPostContent: true,
                showFeedback: true,
                showShare: true
            });
        </script>
    </main>
    <div id="def-footer"> </div>
    <!-- Write closure template -->
    <script type="text/javascript">
        var defFooter = document.getElementById("def-footer");
        defFooter.outerHTML = wet.builder.footer({
            showFooter: true,
            showFeatures: true
        });
    </script>
    <!-- Write closure template -->
    <script type="text/javascript">
        document.write(wet.builder.refFooter({}));
    </script>
    <script>
        (function($, document, wb) {
            "use strict";
            $('.data-ajax').on("wb-contentupdated", function(event, data) {
                // "data.ajax-type" contains the insersion method [after, append, before, prepend, replace]
                // "data.content" contains the
                var $elm = $(event.currentTarget);
                $elm
                    .find(wb.allSelectors)
                    .addClass("wb-init")
                    .filter(":not(#" + $elm.attr("id") + " .wb-init .wb-init)")
                    .trigger("timerpoke.wb");
                /*
                 * Since we are working with events we want to ensure that we are being
                 * passive about our control, so returning true allows for events to always
                 * continue
                 */
                return true;
            });
        })(jQuery, document, wb);
    </script>
    <script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script>
    <script>
        //prevent enter from submitting the form
        var list = document.querySelectorAll("input,select");
        for (i=0;i < list.length; i++) {
            list[i].addEventListener("keypress", function(event) {
                if (event.keyCode == 13) {
                    event.preventDefault();
                }
            })
        }

        (function($, wb) {
            "use strict";
            var $document = wb.doc;
            $document.on("click vclick", ".wb-lbx", function(event) {
                var value = $(this).attr('href');
                $document.trigger("open.wb-lbx", [
                    [{
                        src: value,
                        type: "inline"
                    }]
                ]);
            });
        })(jQuery, wb);
        const toMoney = new Intl.NumberFormat(wb.lang + "-CA", {
            style: "currency",
            currency: "CAD",
            minimumFractionDigits: 2
        });
        const NON_CURRENCY_CHARACTER = /[a-zA-Z\+\-~<>?\/":;'\[\{\]\}\\|!@#$%^&*()_=]/g;
        const FRENCH_CURRENCY_FORMAT = /^(\d{1,3}(\s\d{3})*|(\d+))(\,\d{2})?$/gm;
        const ENGLISH_CURRENCY_FORMAT = /^(\d{1,3}(\,\d{3})*|(\d+))(\.\d{2})?$/gm;
        /**
         * calculateCommonRoomClaimRate
         * 
         * calculate the percentage of bills that can be claimed when using a 
         * common room
         * 
         * @param {Float} percSpaceUsed the percentage of the total finished area 
         * that is used for work
         * @param {Float} percHour the percentage of the week that the space is 
         * used for work purposes
         * 
         * @return {Float} the percentage of bills that can be claimed; 0 if params * fail validation
         */
        function calculateCommonRoomClaimRate(percSpaceUsed, percHour) {
            if (parseFloat(percSpaceUsed) && parseFloat(percHour)) {
                return percSpaceUsed * percHour / 100;
            }
            return 0;
        }

        /**
         * reformat the currency values after a short delay
         */
        $(document).on("blur", ".currency", reformatNumber);

        function reformatNumber(event) {
            if (event.target.value == "") {
                return;
            }
            if (event.target.value.match(NON_CURRENCY_CHARACTER)) {
                event.target.value = event.target.value.replace(NON_CURRENCY_CHARACTER, "");
            }
            event.target.value = toFloat(event.target.value);
            event.target.value = toMoney.format(event.target.value)
                .replace("$", "");
        }

        /**
         * calculateSpaceUsed
         * 
         * calculate the space used as workspace
         * 
         * @param {Float} workArea the total area used for work purposes
         * @param {Float} totalArea the total area of the home
         * 
         * @return {Float} the percentage of space used for work
         */
        function calculateSpaceUsed(workArea, totalArea) {
            return workArea / totalArea * 100;
        }

        /**
         * getCommonWorkSpace
         * 
         * determine the total common space used for work
         *
         * @return {Float} the total common space used for work
         */
        function getCommonWorkSpace() {
            var workArea = 0;
            //if common room panel is visible, add each common room to the work space
            if (!$("div.shared-room").hasClass("hidden")) {
                if ($("#shared-room-area-input").val() !== "") {
                    workArea += parseFloat($("#shared-room-area-input").val());
                }
            }
            return workArea;
        }

        /**
         * getCommonWorkSpaceHours
         * 
         * determine the percentage of the week that the common space used for work
         *
         * @return {object} with property for raw hours and property 
         * representing the percentage of hours the room is used during the week
         */
        function getCommonWorkSpaceHours() {
            var workHours = 0;
            if (!$("div.shared-room").hasClass("hidden")) {
                if ($("#shared-room-hrs-input").val() !== "") {
                    workHours += parseFloat($("#shared-room-hrs-input").val());
                }
            }
            return {
                rawHours: workHours,
                percentage: workHours / 168 * 100
            };
        }

        /**
         * getDesignatedWorkSpace
         * 
         * determine the total designated space used for work
         *
         * @return {Float} the designated space used for work
         */
        function getDesignatedWorkSpace() {
            var workArea = 0;
            //if the designated work space input is visible, add it to the work space
            if (!$("#designated-room-area-input").hasClass("hidden")) {
                if ($("#designated-room-area-input").val() !== "") {
                    workArea += parseFloat($("#designated-room-area-input").val());
                }
            }
            return workArea;
        }


        /**
         * toFloat
         * 
         * convert a formatted number to a JS compliant float
         * 
         * param {String} the formatted number
         * 
         * return {Float} the JS compliant float equiv
         */
        function toFloat(number) {
            number = number.trim();
            if (number == "") {
                return parseFloat(0);
            }
            var reformattedNumber = 0;
            if (number.match(FRENCH_CURRENCY_FORMAT)) {
                reformattedNumber = number.replace(/\s/g, "");
                reformattedNumber = reformattedNumber.replace(/\,/g, ".");
                return parseFloat(reformattedNumber);
            } else if (number.match(ENGLISH_CURRENCY_FORMAT)) {
                reformattedNumber = number.replace(/\,/g, "");
                return parseFloat(reformattedNumber);
            } else {
                return parseFloat(number);
            }
        }

        /**
         * validateDates
         * 
         * Validating the start and end date
         * 
         */
        function validateDates() {
            var fromDate = $("#work-home-start").val();
            var toDate = $("#work-home-end").val();

            //Start Date
            if (fromDate) {
                $(".startDate").text(fromDate);
            }

            //End Date
            if (toDate) {
                $(".endDate").text(toDate);
            }
        }

        /**
         * calculateDesignatedRoom
         *
         * Calculation for Designated Room
         *
         */
        function calculateDesignatedRoom(state, rate) {
            if (state == 1) {
                //Personal-use portion claim
                var personalRate = (100 - rate).toFixed(2);
                if ($("#shared-room-maintenance-input").is(":visible")) {
                    personalRebate = toMoney.format(((sharedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100))));
                    personalRebateNumber = ((sharedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100)));
                    $(".personal-use-output").text(personalRebate);
                    return personalRebateNumber;
                } else {
                    personalRebate = toMoney.format((((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (personalRate / 100))));
                    personalRebateNumber = (((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (personalRate / 100)));
                    $(".personal-use-output").text(personalRebate);
                    return personalRebateNumber;
                }
            } else if (state == 3) {
                //Line 12
                var workRate = rate.toFixed(2);
                if ($("#shared-room-maintenance-input").is(":visible")) {
                    workRebate = toMoney.format(((sharedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (workRate / 100))));
                    workRebateNumber = ((sharedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill) + HomeInsuranceBill + PropertyTaxesBill * (workRate / 100)));
                    $(".employment-use-output").text(workRebate);
                    return workRebateNumber;
                } else {
                    workRebate = toMoney.format(((designatedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (workRate / 100))));
                    workRebateNumber = ((designatedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (workRate / 100)));
                    $(".employment-use-output").text(workRebate);
                    return workRebateNumber;
                }
            }
        }

        /**
         * calculateCommonArea
         *
         * Calculation for Shared Room
         *
         */
        function calculateCommonArea(state) {
            if (state == 2) {
                //Personal-Use Portion
                var sum = parseFloat($(".shared-room-hrs-percent-output").text());
                var workspaceRate = 100 - sum;
                var personalRate = $("#shared-room-personal-percent-output-id").text();
                var sharedExpenseRate = $("#shared-room-hrs-percent-output-id").val();

                var suppliesRebate = (suppliesBill + OtherExpensesEmploymentBill); //100% of Supplies + other employment expenses
                var personal = toMoney.format(((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100))); //Expenses based on square footage of workspace and hours worked in it
                var personalNumber = ((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100));

                var sharedExpense = (sharedMaintenanceBill) * (workspaceRate / 100);
                var result = suppliesRebate + personalNumber + sharedExpense;

                $(".personal-use-output").text(toMoney.format(result));

                //Personal-Use Portion
                if (result) {
                    var summary = toMoney.format(result);
                    summary = summary.replace("$", "");
                    $(".personal-use-total-amount").text(summary);
                } else {
                    $(".personal-use-total-amount").text("0.00");
                }

                return result;
            } else if (state == 4) {
                //Employment-use
                var sum = parseFloat($(".shared-room-hrs-percent-output").text());
                var personalRate = $("#shared-room-personal-percent-output-id").text();
                var sharedExpenseRate = sum.toFixed(2);
                var workspaceRate = (100 - personalRate).toFixed(2);

                var suppliesRebate = (suppliesBill + OtherExpensesEmploymentBill); //100% of Supplies + other employment expenses
                var personal = toMoney.format(((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (workspaceRate / 100))); //Expenses based on square footage of workspace and hours worked in it
                var personalNumber = ((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (workspaceRate / 100));

                var sharedExpense = (sharedMaintenanceBill) * (sharedExpenseRate / 100);
                var result = (suppliesRebate + personalNumber + sharedExpense).toFixed(2);

                $(".ws-t777short-total-amount").text(result);
                $(".ws-total-claim-output").text(toMoney.format(result));
                return result;
            }
        }

        /**
         * fillClaims
         * 
         * Filling out Claims in the Summary Report
         * 
         */
        function fillClaims(state) {
            if (state == 1) {
                $(".utilities-output").text(toMoney.format(electricityBill));
                $(".home-ws-maintenance").text(toMoney.format(maintenanceBill));
                $(".designated-room-maintenance-output").text(toMoney.format(designatedMaintenanceBill));
                totalMaintenanceBill = designatedMaintenanceBill + maintenanceBill;
                $(".maintenance-output").text(toMoney.format(totalMaintenanceBill));
                $(".insurance-commission-output").text(toMoney.format(HomeInsuranceBill));
                $(".property-taxes-commission-output").text(toMoney.format(PropertyTaxesBill));
                $(".home-expenses-output").text(toMoney.format(OtherHomeExpensesBill));
            } else if (state == 2) {
                $(".utilities-output").text(toMoney.format(electricityBill));
                $(".home-ws-maintenance").text(toMoney.format(maintenanceBill));
                $(".shared-room-maintenance-output").text(toMoney.format(sharedMaintenanceBill));
                totalMaintenanceBill = sharedMaintenanceBill + maintenanceBill;
                $(".maintenance-output").text(toMoney.format(totalMaintenanceBill));
                $(".insurance-commission-output").text(toMoney.format(HomeInsuranceBill));
                $(".property-taxes-commission-output").text(toMoney.format(PropertyTaxesBill));
                $(".home-expenses-output").text(toMoney.format(OtherHomeExpensesBill));
            } else if (state == 3) {
                $(".supplies-output").text(toMoney.format(suppliesBill));
                $(".ws-expenses-output").text(toMoney.format(OtherExpensesEmploymentBill));
                $(".utilities-output").text(toMoney.format(electricityBill));
                $(".home-ws-maintenance").text(toMoney.format(maintenanceBill));
                $(".designated-room-maintenance-output").text(toMoney.format(designatedMaintenanceBill));
                totalMaintenanceBill = designatedMaintenanceBill + maintenanceBill;
                $(".maintenance-output").text(toMoney.format(totalMaintenanceBill));
                $(".insurance-commission-output").text(toMoney.format(HomeInsuranceBill));
                $(".property-taxes-commission-output").text(toMoney.format(PropertyTaxesBill));
                $(".home-expenses-output").text(toMoney.format(OtherHomeExpensesBill + RentBill));
                $(".income-output").text(toMoney.format(income));
                $(".dues-pension-output").text(toMoney.format(dues + pension));
            } else if (state == 4) {
                $(".supplies-output").text(toMoney.format(suppliesBill));
                $(".ws-expenses-output").text(toMoney.format(OtherExpensesEmploymentBill));
                $(".utilities-output").text(toMoney.format(electricityBill));
                $(".home-ws-maintenance").text(toMoney.format(maintenanceBill));
                $(".shared-room-maintenance-output").text(toMoney.format(sharedMaintenanceBill));
                totalMaintenanceBill = sharedMaintenanceBill + maintenanceBill;
                $(".maintenance-output").text(toMoney.format(totalMaintenanceBill));
                $(".insurance-commission-output").text(toMoney.format(HomeInsuranceBill));
                $(".property-taxes-commission-output").text(toMoney.format(PropertyTaxesBill));
                $(".home-expenses-output").text(toMoney.format(OtherHomeExpensesBill + RentBill));
                $(".income-output").text(toMoney.format(income));
                $(".dues-pension-output").text(toMoney.format(dues + pension));
            } else {}
        }

        /**
         * calculateIncomeAndBills
         * 
         * Adding in all inputs to fields
         * 
         */
        function calculateBills() {
            if ($("#supplies-input").is(":visible")) {
                suppliesBill = toFloat($("#supplies-input").val());
            } else {
                suppliesBill = 0.00;
            }
            if ($("#ws-expenses-input").is(":visible")) {
                OtherExpensesEmploymentBill = toFloat($("#ws-expenses-input").val());
            } else {
                OtherExpensesEmploymentBill = 0.00;
            }
            if ($("#utilities-input").is(":visible")) {
                electricityBill = toFloat($("#utilities-input").val());
            } else {
                electricityBill = 0.00;
            }
            if ($("#home-maintenance-input").is(":visible")) {
                maintenanceBill = toFloat($("#home-maintenance-input").val());
            } else {
                maintenanceBill = 0.00;
            }
            if ($("#shared-room-maintenance-input").is(":visible")) {
                sharedMaintenanceBill = toFloat($("#shared-room-maintenance-input").val());
            } else {
                sharedMaintenanceBill = 0.00;
            }
            if ($("#designated-room-maintenance-input").is(":visible")) {
                designatedMaintenanceBill = toFloat($("#designated-room-maintenance-input").val());
            } else {
                designatedMaintenanceBill = 0.00;
            }
            if ($("#home-rent-input").is(":visible")) {
                RentBill = toFloat($("#home-rent-input").val());
            } else {
                RentBill = 0.00;
            }
            if ($("#insurance-commission-input").is(":visible")) {
                HomeInsuranceBill = toFloat($("#insurance-commission-input").val());
            } else {
                HomeInsuranceBill = 0.00;
            }
            if ($("#property-taxes-commission-input").is(":visible")) {
                PropertyTaxesBill = toFloat($("#property-taxes-commission-input").val());
            } else {
                PropertyTaxesBill = 0.00;
            }
            if ($("#home-expenses-input").is(":visible")) {
                OtherHomeExpensesBill = toFloat($("#home-expenses-input").val());
            } else {
                OtherHomeExpensesBill = 0.00;
            }
            if ($("#income-input").is(":visible")) {
                income = toFloat($("#income-input").val());
            } else {
                income = 0.00;
            }
            if ($("#dues-input").is(":visible")) {
                dues = toFloat($("#dues-input").val());
            } else {
                dues = 0.00;
            }
            if ($("#pension-input").is(":visible")) {
                pension = toFloat($("#pension-input").val());
            } else {
                pension = 0.00;
            }
        }

        /**
         * validateSummaryDegt777
         * 
         * Summary Report for Designated Room t777 Regular Form
         * 
         */
        function validateSummaryDegt777(personalUse, rate) {

            expenses = toMoney.format((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill));
            expensesNumber = (maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill);
            
            //Personal Claim
            if (personalUse) {
                var summary = toMoney.format(personalUse);
                summary = summary.replace("$", "");
                $(".personal-use-total-amount").text(summary);
            } else {
                $(".personal-use-total-amount").text("0.00");
            }
            var personalRate = (100 - rate).toFixed(2);

            //Expenses paid for the entire home including work space
            var homeExpenses = toMoney.format(expensesNumber * (personalRate / 100));
            if (homeExpenses) {
                var price = homeExpenses.replace("$", "");
                $(".personal-use-home-amount").text(price);
            } else {
                $(".personal-use-home-amount").text("0.00");
            }

            //Personal Home Use Expences Claim
            if (expenses) {
                var price = expenses.replace("$", "");
                $(".personal-use-home-claim").text(price);
            } else {
                $(".personal-use-home-claim").text("0.00");
            }

            //Personal Use Home Rate
            if (!isNaN(personalRate)) {
                $(".personal-use-home-rate").text(personalRate);
            } else {
                $(".personal-use-home-rate").text("0");
            }

            //Work Space Only Expense
            if (designatedMaintenanceBill) {
                otherMaintenanceRebate = toMoney.format(designatedMaintenanceBill);
                otherMaintenanceRebate = otherMaintenanceRebate.replace("$", "");
                $(".personal-use-ws-claim").text(otherMaintenanceRebate);
            } else {
                $(".personal-use-ws-claim").text("0.00");
            }

            if ($(".ws-feet-sq").hasClass("hidden")) {
                $(".room-area-output").text($("#designated-room-area-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            } else {

                $(".room-area-output").text($("#designated-room-area-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            }
        }

        /**
         * validateSummaryCommt777
         * 
         * Summary Report for Common Area Room t777 Regular Form
         * 
         */
        function validateSummaryCommt777(personalUse, rate) {

            //Personal-Use Portion
            var sum = parseFloat($(".shared-room-hrs-percent-output").text());
            var workspaceRate = (100 - sum).toFixed(2);
            var personalRate = $("#shared-room-personal-percent-output-id").text();

            var expensesToClaim = toMoney.format(maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill);

            var personal = toMoney.format(((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100))); //Expenses based on square footage of workspace and hours worked in it
            var personalNumber = ((maintenanceBill + OtherHomeExpensesBill + electricityBill + HomeInsuranceBill + PropertyTaxesBill + RentBill) * (personalRate / 100));

            var sharedExpense = (sharedMaintenanceBill) * (workspaceRate / 100);
            var sharedExpenseRebate = toMoney.format(sharedExpense);
            sharedMaintenanceRebate = toMoney.format(sharedMaintenanceBill);

            //Personal Home Claim for entire house including work space
            if (personalNumber) {
                var price = personal.replace("$", "");
                $(".personal-use-home-amount").text(price);
            } else {
                $(".personal-use-home-amount").text("0.00");
            }

            //All Expenses except shared space cost
            if (expensesToClaim) {
                var price = expensesToClaim.replace("$", "");
                $(".personal-use-home-claim").text(price);
            } else {
                $(".personal-use-home-claim").text("0.00");
            }

            //Personal Rate for all expenses
            if (!isNaN(personalRate)) {
                $(".personal-use-home-rate").text(personalRate);
            } else {
                $(".personal-use-home-rate").text("0");
            }

            //Workspace Expense
            if (sharedMaintenanceRebate) {
                var price = sharedMaintenanceRebate.replace("$", "");
                $(".personal-use-ws-claim").text(price);
            } else {
                $(".personal-use-ws-claim").text("0.00");
            }

            //Workspace only Rate
            if (!isNaN(workspaceRate)) {
                $(".personal-use-ws-rate").text(workspaceRate);
            } else {
                $(".personal-use-ws-rate").text("0");
            }

            //Personal WS Claim
            if (sharedExpenseRebate) {
                var price = sharedExpenseRebate.replace("$", "");
                $(".personal-use-ws-amount").text(price);
            } else {
                $(".personal-use-ws-amount").text("0.00");
            }

            if ($(".ws-feet-sq").hasClass("hidden")) {
                $(".room-area-output").text($("#shared-room-area-input").val());
                $(".shared-room-hrs-output").text($("#shared-room-hrs-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            } else {
                $(".room-area-output").text($("#shared-room-area-input").val());
                $(".shared-room-hrs-output").text($("#shared-room-hrs-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            }

        }


        /**
         * validateSummaryDegt777Short
         * 
         * Summary Report for Designated Room t777 Short Form
         * 
         */
        function validateSummaryDegt777Short(personalUse, rate) {
            //How much can you claim? Calculation
            workExpenses = suppliesBill + OtherExpensesEmploymentBill + designatedMaintenanceBill;

            //Line 12
            var workRate = rate.toFixed(2);
            workRebate = toMoney.format(((designatedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill) * (workRate / 100))));
            workRebateNumber = ((designatedMaintenanceBill) + ((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill) * (workRate / 100)));
            expenses = toMoney.format((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill));
            expensesNumber = (maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill);
            $(".employment-use-output").text(workRebate);

            //Line 11
            expensesList = electricityBill + totalMaintenanceBill + RentBill + OtherHomeExpensesBill;


            //Line 15
            var line15 = income - (dues + pension);

            //Line 4
            var line4;
            if (line15 < workRebateNumber) {
                line4 = line15;
            } else {
                line4 = workRebateNumber;
            }

            //Line 5
            var expensesClaim = (expensesNumber * (workRate / 100));
            claim = workExpenses + expensesClaim;
            $(".ws-total-claim-output").text(toMoney.format(claim));

            //Line 16
            futureClaims = (workRebateNumber - line15).toFixed(2);
            if (futureClaims < 0) {
                futureClaims = 0.00;
            } else {
                $(".carry-fwd").removeClass("hidden");
                $(".carry-fwd-output").text(toMoney.format(futureClaims));
            }

            //Claim Amount
            if (claim) {
                //var summary = $(".ws-total-claim-output").text().replace("$", "");
                var summary = toMoney.format(claim);
                summary = summary.replace("$", "");
                $(".ws-t777short-total-amount").text(summary);
            } else {
                $(".ws-t777short-total-amount").text("$0.00");
            }


            //Work Claim
            if (workRebateNumber) {
                //var employmentUse = $(".employment-use-output").text().replace("$", "");
                var employmentUse = workRebate;
                employmentUse = employmentUse.replace("$", "");
                $(".employment-use-total-amount").text(employmentUse);
            } else {
                $(".employment-use-total-amount").text("0.00");
            }

            //Expenses Claim for Home
            var homeClaim = toMoney.format(expensesNumber * (workRate / 100));
            if (homeClaim) {
                homeClaim = homeClaim.replace("$", "");
                $(".employment-use-home-amount").text(homeClaim);
            } else {
                $(".employment-use-home-amount").text("0.00");
            }

            //Total Bills outside Other Maintenance
            if (expensesNumber) {
                expenses = expenses.replace("$", "");
                $(".employment-use-home-claim").text(expenses);
            } else {
                $(".employment-use-home-claim").text("0.00");
            }

            //Work Rate
            if (workRate) {
                $(".employment-use-home-rate").text(workRate);
            } else {
                $(".employment-use-home-rate").text("0");
            }

            //Expenses paid for Work Space Only
            if (designatedMaintenanceBill) {
                otherMaintenanceRebate = toMoney.format(designatedMaintenanceBill);
                otherMaintenanceRebate = otherMaintenanceRebate.replace("$", "");
                $(".employment-use-ws-amount").text(otherMaintenanceRebate);
            } else {
                $(".employment-use-ws-amount").text("0.00");
            }

            //Work Space Only Expense
            if (designatedMaintenanceBill) {
                otherMaintenanceRebate = toMoney.format(designatedMaintenanceBill);
                otherMaintenanceRebate = otherMaintenanceRebate.replace("$", "");
                $(".employment-use-ws-claim").text(otherMaintenanceRebate);
            } else {
                $(".employment-use-ws-claim").text("0.00");
            }

            //Work Space Only Rate (100%)
            var workspaceRate = 100;
            if (workspaceRate) {
                $(".employment-use-ws-rate").text(workspaceRate);
            } else {
                $(".employment-use-ws-rate").text("0");
            }

            //Claims for Future Years 
            if (futureClaims) {
                $(".carry-forward-output").text(toMoney.format(futureClaims));
            } else {
                $(".carry-forward-output").text("0.00");
            }

            //Employment-Use SALARY
            if (workRebate) {
                $("#oemployment-use-salary-total-amount").text(workRebate);
            } else {
                $("#oemployment-use-salary-total-amount").text("0.00");
            }

            //Total Bills outside Other Maintenance SALARY
            if (expensesNumber) {
                expenses = expenses.replace("$", "");
                $(".employment-use-salary-home-claim").text(expenses);
            } else {
                $(".employment-use-salary-home-claim").text("0.00");
            }

            //Expenses Claim for Home SALARY
            var homeClaim = toMoney.format(expensesNumber * (workRate / 100));
            if (homeClaim) {
                homeClaim = homeClaim.replace("$", "");
                $(".employment-use-salary-home-amount").text(homeClaim);
            } else {
                $(".employment-use-salary-home-amount").text("0.00");
            }

            if ($(".ws-feet-sq").hasClass("hidden")) {
                $(".room-area-output").text($("#designated-room-area-input").val());
                var homeArea = $("#total-home-area-input").val();
                $(".total-home-area-summary").text(homeArea);
            } else {
                $(".room-area-output").text($("#designated-room-area-input").val());
                var homeArea = $("#total-home-area-input").val();
                $(".total-home-area-summary").text(homeArea);
            }
        }

        /**
         * validateSummaryCommt777Short
         * 
         * Summary Report for Shared Room t777 Short Form
         * 
         */
        function validateSummaryCommt777Short(personalUse, rate) {
            //How much can you claim? Calculation
            workExpenses = suppliesBill + OtherExpensesEmploymentBill;

            //Line 12
            var workRate = rate.toFixed(2);
            workRebate = toMoney.format((((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (workRate / 100))));
            workRebateNumber = (((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill) * (workRate / 100)));
            expenses = toMoney.format((maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill));
            expensesNumber = (maintenanceBill + OtherHomeExpensesBill + electricityBill + RentBill + HomeInsuranceBill + PropertyTaxesBill);
            sharedRate = parseFloat($(".shared-room-hrs-percent-output").text());
            sharedExpense = ((sharedMaintenanceBill) * (sharedRate / 100));
            var employmentUse = (workRebate + sharedExpense);
            $(".employment-use-output").text(toMoney.format(workRebateNumber + sharedExpense));

            //Line 11
            expensesList = electricityBill + totalMaintenanceBill + RentBill + OtherHomeExpensesBill;


            //Line 15
            var line15 = income - (dues + pension);

            //Line 4
            var line4;
            if (line15 < workRebateNumber) {
                line4 = line15;
            } else {
                line4 = workRebateNumber;
            }

            //Line 5
            claim = workExpenses + sharedExpense + line4;
            $(".ws-total-claim-output").text(toMoney.format(claim));

            //Line 16
            futureClaims = workRebateNumber - line15;
            if (futureClaims < 0) {
                futureClaims = 0.00;
            } else {
                $(".carry-fwd").removeClass("hidden");
                $(".carry-fwd-output").text(toMoney.format(futureClaims));
            }

            //Work Claim
            if (workRebateNumber) {
                var employmentUse = workRebateNumber + sharedExpense;
                employmentUse = toMoney.format(employmentUse);
                employmentUse = employmentUse.replace("$", "");
                $(".employment-use-total-amount").text(employmentUse);
            } else {
                $(".employment-use-total-amount").text("0.00");
            }

            //Expenses Claim for Home
            var homeClaim = toMoney.format(expensesNumber * (workRate / 100));
            if (homeClaim) {
                homeClaim = homeClaim.replace("$", "");
                $(".employment-use-home-amount").text(homeClaim);
            } else {
                $(".employment-use-home-amount").text("0.00");
            }

            //Total Bills outside Other Maintenance
            if (expensesNumber) {
                expenses = expenses.replace("$", "");
                $(".employment-use-home-claim").text(expenses);
            } else {
                $(".employment-use-home-claim").text("0.00");
            }

            //Work Rate
            if (workRate) {
                $(".employment-use-home-rate").text(workRate);
            } else {
                $(".employment-use-home-rate").text("0");
            }

            //Work Space Only Expense
            if (sharedMaintenanceBill) {
                otherMaintenanceRebate = toMoney.format(sharedMaintenanceBill);
                otherMaintenanceRebate = otherMaintenanceRebate.replace("$", "");
                $(".employment-use-ws-claim").text(otherMaintenanceRebate);
            } else {
                $(".employment-use-ws-claim").text("0.00");
            }

            //Expenses paid for Work Space Only
            if (sharedExpense) {
                var workspaceClaim = toMoney.format(sharedExpense);
                workspaceClaim = workspaceClaim.replace("$", "");
                $(".employment-use-ws-amount").text(workspaceClaim);
            } else {
                $(".employment-use-ws-amount").text("0.00");
            }

            //Work Space Only Rate (100%)
            var workspaceRate = parseFloat($(".shared-room-hrs-percent-output").text());
            workspaceRate = workspaceRate.toFixed(2);
            if (workspaceRate) {
                $(".employment-use-ws-rate").text(workspaceRate);
            } else {
                $(".employment-use-ws-rate").text("0");
            }

            //Claims for Future Years 
            if (futureClaims) {
                $(".carry-forward-output").text(toMoney.format(futureClaims));
            } else {
                $(".carry-forward-output").text("0.00");
            }

            //Employment-Use SALARY
            if (workRebate) {
                $("#oemployment-use-salary-total-amount").text(workRebate);
            } else {
                $("#oemployment-use-salary-total-amount").text("0.00");
            }

            //Total Bills outside Other Maintenance SALARY
            if (expensesNumber) {
                expenses = expenses.replace("$", "");
                $(".employment-use-salary-home-claim").text(expenses);
            } else {
                $(".employment-use-salary-home-claim").text("0.00");
            }

            //Expenses Claim for Home SALARY
            var homeClaim = toMoney.format(expensesNumber * (workRate / 100));
            if (homeClaim) {
                homeClaim = homeClaim.replace("$", "");
                $(".employment-use-salary-home-amount").text(homeClaim);
            } else {
                $(".employment-use-salary-home-amount").text("0.00");
            }

            if ($(".ws-feet-sq").hasClass("hidden")) {
                $(".room-area-output").text($("#shared-room-area-input").val());
                $(".shared-room-hrs-output").text($("#shared-room-hrs-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            } else {
                $(".room-area-output").text($("#shared-room-area-input").val());
                $(".shared-room-hrs-output").text($("#shared-room-hrs-input").val());
                $(".total-home-area-summary").text($("#total-home-area-input").val());
            }

        }

        //when the total area input is updated
        $(document).on("change keyup", "#total-home-area-input", function(event) {
            //update the total finished area summary 
            var totalArea = parseFloat(event.target.value);
            if (!isNaN(totalArea)) {
                $(".total-home-area-output").text(totalArea);
            } else {
                $(".total-home-area-output").text("0");
            }
            //calculate the total area used as a percentage of the total finished area
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();
            var spaceUsed = calculateSpaceUsed(workArea, totalArea).toFixed(2);
            //update display
            if (!isNaN(spaceUsed)) {
                $(".ws-area-personal-percent-output").text((100 - spaceUsed).toFixed(2));
                $(".ws-area-employment-percent-output").text(spaceUsed);
            } else {
                $(".ws-area-employment-percent-output").text("0");
                $(".ws-area-personal-percent-output").text("0");
            }
            var claimRate = calculateCommonRoomClaimRate(spaceUsed, getCommonWorkSpaceHours().percentage).toFixed(2);
            $(".shared-room-personal-percent-output").text((100 - claimRate).toFixed(2));
            $(".shared-room-employment-percent-output").text(claimRate);
        });

        //trigger the summary to update when common workspace input is updated
        $(document).on("change keyup", "#shared-room-area-input", function(event) {
            var workArea = getCommonWorkSpace();
            if (!isNaN(workArea)) {
                $(".room-area-output").text(workArea);
            } else {
                $(".room-area-output").text("0");
            }
            $("#total-home-area-input").trigger("change");
            var claimRate = calculateCommonRoomClaimRate(
                calculateSpaceUsed(workArea, $("#total-home-area-input").val()),
                getCommonWorkSpaceHours().percentage
            ).toFixed(1);
            $(".shared-room-personal-percent-output").text((100 - claimRate).toFixed(2));
            $(".shared-room-employment-percent-output").text(parseFloat(claimRate).toFixed(2));
        });
        //when designated work space input is changed
        $(document).on("change keyup", "#designated-room-area-input", function(event) {
            var workArea = getDesignatedWorkSpace();
            if (!isNaN(workArea)) {
                $(".room-area-output").text(workArea);
            } else {
                $(".room-area-output").text("0");
            }
            $("#total-home-area-input").trigger("change");
        });

        //when end date is changed
        $(document).on("change keyup", "[id^='work-home-']", function(event) {
            var index = event.target.id.split("-")[3];
            var fromDate = $("#work-home-start-" + index).val();
            var toDate = $("#work-home-end-" + index).val();
            //Start Date
            if (fromDate) {
                $(".startDate" + index).text(fromDate);
            }
            //End Date
            if (toDate) {
                $(".endDate" + index).text(toDate);
            }
        });

        //make sure the claim period doesnt exceed the start year
        $(document).on("change keyup", "[id^='work-home-start']", function(event) {
            var startDateElement = event.target;
            var startDate = new Date(startDateElement.value);
            var endDateElements = $("[id^='work-home-end']");
            $(endDateElements).each(function(i, element) {
                $(element).attr("max", startDate.getFullYear() + "-12-31");
                $(element).attr("min", startDate.getFullYear() + "-01-01");
            });
            $("#work-home-start-2").attr("max", startDate.getFullYear()  + "-12-31");
            $("#work-home-start-3").attr("max", startDate.getFullYear()  + "-12-31");
            $("#work-home-start-4").attr("max", startDate.getFullYear()  + "-12-31");
            $("#work-home-start-2").attr("min", startDate.getFullYear()  + "-01-01");
            $("#work-home-start-3").attr("min", startDate.getFullYear()  + "-01-01");
            $("#work-home-start-4").attr("min", startDate.getFullYear()  + "-01-01");
        });

        //reset date field values, min, max, and spans when date is removed
        $(document).on("click keyup", "button[id^='remove-date-']", function(event) {
            if (event.target.nodeName == "SPAN") {
                event.target = event.target.parentElement;
            }
            var index = $(event.target).prop("id").replace("remove-date-", "");
            $("#work-home-start-" + index).val("");
            $("#work-home-end-" + index).val("");
            $(".startDate" + index).text("start");
            $(".endDate" + index).text("end");
        });

        //when a user updates the common space hours
        $(document).on("change keyup", "#shared-room-hrs-input", function(event) {
            if ($("#shared-room-area-input").val() == "" && $("#total-home-area-input").val() == "") {
                return;
            }
            var hours = getCommonWorkSpaceHours();
            if (!isNaN(hours.percentage) && !isNaN(hours.rawHours)) {
                $(".perhr-percent-sum").text(100 - hours.percentage);
                $(".shared-room-hrs-percent-output").text(hours.percentage.toFixed(2));
                $(".shared-room-personal-hrs-percent-output").text(
                    100 - hours.percentage.toFixed(2)
                );
                $(".shared-room-hrs-output").text(hours.rawHours);
                $("#per-cmmn-rm-sum").text(168 - hours.rawHours);
            } else {
                $(".perhr-percent-sum").text("0");
                $(".perhr-percent-sum").text("0");
                $(".shared-room-hrs-output").text("0");
                $("#per-cmmn-rm-sum").text("0");
            }
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();
            var claimRate = calculateCommonRoomClaimRate(
                calculateSpaceUsed(workArea, $("#total-home-area-input").val()),
                hours.percentage
            ).toFixed(2);
            $(".shared-room-personal-percent-output").text((100 - claimRate).toFixed(2));
            $(".shared-room-employment-percent-output").text(parseFloat(claimRate).toFixed(2));
            //$(".shared-room-employment-hrs-percent-output").text((100 - claimRate).toFixed(2));
        });

        //when the commission or work space type radios are changed. using this method of selecting because fieldflow does not give us ID's to work with
        $(document).on("click", "input[type='radio']:first, input[type='radio']:eq(1), input[type='radio']:eq(2), input[type='radio']:eq(3)", function(event) {
            $("input[type='text'], input[type='number']").each(function(i, element) {
                $(element).val("");
                $(element).trigger("change");
            });
            $("#results").addClass("hidden");
        });

        //submit button was clicked
        $(document).on("click", "#exp-cal", function(event) {
            event.preventDefault();
            var form = $("#wsih-calculator-form");
            form.validate()
                //if WET4 already has errors, return
            if (!form.valid()) {
                return;
            } else {
                $("#results").removeClass("hidden");
            }
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();

            //Global Variables for Income and Bills
            var state;
            var income;
            var dues;
            var pension
            var suppliesBill;
            var OtherExpensesEmploymentBill;
            var electricityBill;
            var maintenanceBill;
            var designatedMaintenanceBill;
            var sharedMaintenanceBill;
            var totalMaintenanceBill;
            var RentBill;
            var HomeInsuranceBill;
            var PropertyTaxesBill;
            var OtherHomeExpensesBill;
            var rate;

            if ($(".ws-t777short").hasClass("hidden")) { //t777 Regular Form

                //designated Room
                if ($(".shared-room").hasClass("hidden")) {
                    state = 1;
                    validateDates();
                    var TotalArea = $("#total-home-area-input").val();
                    var rate = calculateSpaceUsed(workArea, TotalArea);
                    calculateBills();
                    fillClaims(state);
                    var personalUse = calculateDesignatedRoom(state, rate);
                    if (personalUse < 399.99) {
                        $("#flat-rate-info").removeClass("hidden");
                    } else {
                        $('#flat-rate-info').addClass("hidden");
                    }
                    validateSummaryDegt777(personalUse, rate);
                }

                //Common Area Room
                if ($(".designated-room").hasClass("hidden")) {
                    state = 2;
                    validateDates();
                    var TotalArea = $("#total-home-area-input").val();
                    var rate = $("#shared-room-employment-percent-output-id").text();
                    rate = parseFloat(rate);
                    calculateBills();
                    fillClaims(state);
                    var personalUse = calculateCommonArea(state);
                    if (personalUse < 399.99) {
                        $("#flat-rate-info").removeClass("hidden");
                    } else {
                        $('#flat-rate-info').addClass("hidden");
                    }
                    validateSummaryCommt777(personalUse, rate);
                }
            }

            if ($(".ws-t777reg").hasClass("hidden")) { //t777 Short Form

                //designated Room
                if ($(".shared-room").hasClass("hidden")) {
                    state = 3;
                    validateDates();
                    var TotalArea = $("#total-home-area-input").val();
                    var rate = calculateSpaceUsed(workArea, TotalArea);
                    calculateBills();
                    fillClaims(state);
                    var workUse = calculateDesignatedRoom(state, rate);
                    if (workUse < 399.99) {
                        $("#flat-rate-info").removeClass("hidden");
                    } else {
                        $('#flat-rate-info').addClass("hidden");
                    }
                    validateSummaryDegt777Short(workUse, rate);
                }

                //Common Area Room
                if ($(".designated-room").hasClass("hidden")) {
                    state = 4;
                    validateDates();
                    var TotalArea = $("#total-home-area-input").val();
                    var rate = $("#shared-room-employment-percent-output-id").text();
                    rate = parseFloat(rate);
                    calculateBills();
                    fillClaims(state);
                    var personalUse = calculateCommonArea(state);
                    if (personalUse < 399.99) {
                        $("#flat-rate-info").removeClass("hidden");
                    } else {
                        $('#flat-rate-info').addClass("hidden");
                    }
                    validateSummaryCommt777Short(personalUse, rate);
                }
            }
        });
    </script>
</body>

</html>
